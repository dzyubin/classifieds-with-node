<div navbar></div>
<!--<div class="filters well form-inline clearfix" ng-show="showFilters">

    <div class="form-group">
        <label for="search"></label>
        <input type="text" class="form-control" id="search" ng-model="classifiedsFilter" autofocus
        placeholder="Введіть ключове слово"/>
    </div>

    <div class="form-group">
        <label for="category">Категорія</label>
        <select name="category" class="form-control" id="category" ng-model="category">
            <option ng-repeat="category in categories" value="{{ category }}">
                {{ category }}
            </option>
        </select>
    </div>

    <div class="form-group">
        <button class="btn btn-warning" ng-click="classifiedsFilter = ''; category = ''">Очистити</button>
    </div>

</div>-->

<ui-view></ui-view>

<div class="container"  ng-controller='PaginationCtrl as data'>

    <!--'Всі Оголошення'\'Мої Оголошення'-->
    <div class="btn-group pull-right" ng-show="vm.loggedIn">
        <button type="button" class="btn btn-default"
                ng-class="{active: myClassifiedsBtnActive}" ng-click="data.loadUserClassifieds()">
            Мої Оголошення
        </button>
        <button type="button" class="btn btn-default"
                ng-class="{active: !myClassifiedsBtnActive}" ng-click="data.loadAllClassifieds()">
            Всі Оголошення
        </button>
    </div>

    <div infinite-scroll='classifiedsDBService.nextPage()' infinite-scroll-disabled='classifiedsDB.busy'
         infinite-scroll-distance='0'>
         <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Назва</th>
                    <th>Ціна</th>
                    <th>Категорія</th>
                    <th>Зображення</th>
                    <th>Опис</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            <tr ng-repeat="classified in classifieds | filter: classifiedsFilter | filter: category">
                <td>{{classified.title}}</td>
                <td>{{classified.price}}</td>
                <td>
                    <p ng-repeat="category in classified.category">
                        {{category}}
                    </p>
                    <div class="modal fade" id="{{classified._id}}" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    <h4 class="modal-title" id="myModalLabel">Редагувати Категорію</h4>
                                </div>
                                <div class="modal-body">
                                    <form class="form-horizontal">
                                        <div class="form-group">
                                            <label for="categories" class="col-sm-2 control-label">Категорія</label>
                                            <div class="col-sm-10">
                                                <select id="categories" class="select form-control" multiple
                                                        ng-model="classified.category"
                                                        style="width: 100%;">
                                                    <option ng-repeat="category in data.categories"
                                                            value="{{category}}">
                                                        {{ category }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <small>Щоб додати нову категорію, введіть назву в полі "Категорія" і натисніть "Enter"</small>
                                        <!--<div class="form-group">
                                            <label for="newCategory" class="col-sm-2 control-label">
                                                Нова Категорія
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" id="newCategory" class="form-control"
                                                       ng-model="data.newCategory">
                                            </div>
                                            <button type="button" class="btn btn-primary"
                                                    ng-click="data.addNewCategory(classified)">
                                                Додати
                                            </button>
                                        </div>-->
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal"
                                            ng-click="data.cancelCategoriesEdit(classified)">
                                        Закрити
                                    </button>
                                    <button type="button" class="btn btn-primary"
                                            ng-click="data.updateCategory(classified)">
                                        Зберегти Зміни
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--<div id="category-edit" class="well" ng-show="editingCategory">
                        <md-input-container>
                            <label for="categories">Категорія(-ії)</label>
                            <md-select ng-show="editingCategory" id="categories" multiple ng-model="classified.category">
                                <i ng-show="!data.categories" class="fa fa-spinner fa-spin"></i>
                                <md-option ng-repeat="category in data.categories" value="{{category}}">
                                    {{category}}
                                </md-option>
                            </md-select>
                        </md-input-container>
                        <md-input-container>
                            <label for="newCategory">Нова категорія</label>
                            <input type="text" id="newCategory" ng-model="data.newCategory">
                        </md-input-container>
                        <button class="btn btn-default btn-xs btn-block" aria-label="" type="button"
                                   ng-click="data.addNewCategory(classified)">
                            Додати нову категорію
                        </button>
                        <hr>
                        <button class="btn btn-primary btn-xs btn-block pull-left" style="width: 70%; margin-right: 5px;"
                                ng-click="data.updateCategory(classified);editingCategory=false">
                            Зберегти
                        </button>
                        <button class="btn btn-primary btn-xs btn-block" style="width: 25%;"
                                ng-click="editingCategory=false">
                            X
                        </button>
                    </div>-->
                    <button type="button" class="btn btn-primary btn-xs btn-block" ng-show="vm.loggedIn"
                            data-toggle="modal" data-target="#{{classified._id}}" data-classified="classified"
                            ng-click="data.initialCategories = classified.category">
                        <span class="glyphicon glyphicon-pencil"></span>
                        Редагувати
                    </button>
                </td>
                <td><img ng-src="{{classified.image}}" alt="" width="100"></td>
                <td>{{classified.content}}</td>
                <td>

                    <!--Контактні дані-->
                    <div class="dropdown">
                        <button class="btn btn-primary btn-xs dropdown-toggle btn-block" type="button" id="dropdownMenuContactData"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Контактні дані
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuContactData">
                            <li><span class="glyphicon glyphicon-user"> {{ classified.contact.name }}</span></li>
                            <li><span class="glyphicon glyphicon-phone"> {{ classified.contact.phone }}</span></li>
                            <li><span class="glyphicon glyphicon-envelope"> {{ classified.contact.email }}</span></li>
                        </ul>
                    </div>

                    <!--Адмін-->
                    <div class="dropdown" ng-show="vm.loggedIn">
                        <button class="btn btn-primary btn-xs dropdown-toggle btn-block" type="button" id="dropdownMenuAdmin"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Адмін
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuAdmin">
                            <li>
                                <a ng-href="javascript:;" ng-click="data.editClassified(classified)">
                                    Редагувати
                                </a>
                                <a ng-href="javascript:;" ng-click="data.removeClassified(classified)">
                                    Видалити
                                </a>
                            </li>
                        </ul>
                    </div>
                </td>
            </tr>
            <tr ng-show="classifiedsDBService.busy">
                <td colspan="5" class="text-center">
                    <i class="fa fa-spinner fa-spin"></i>
                </td>
            </tr>
            </tbody>
         </table>
    </div>
</div>
