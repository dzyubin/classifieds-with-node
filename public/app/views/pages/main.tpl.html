<nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse"
                data-target="#nav-toggle">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#/classifieds">Оголошення</a>
    </div>

    <div class="collapse navbar-collapse" id="nav-toggle">
        <ul class="nav navbar-nav">
            <li ng-if="!vm.loggedIn">
                <a ng-href="#/classifieds" ng-click="vm.openSidebar()">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Новий Товар
                </a>
            </li>
            <li ng-if="vm.loggedIn">
                <a ng-href="#/classifieds/new" ng-click="vm.openSidebar()">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Новий Товар
                </a>
            </li>
            <!--<li>
                <a ng-href="#" ng-click="showFilters = !showFilters">
                    <span class="glyphicon glyphicon-search"></span>
                    Фільтр
                </a>
            </li>-->
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a ng-if="!vm.loggedIn" ng-href="#/classifieds/register">
                    <span class="glyphicon glyphicon-pencil"></span>
                    Реєстрація
                </a>
            </li>
            <li>
                <a ng-if="!vm.loggedIn" ng-href="#/classifieds/login">
                    <span class="glyphicon glyphicon-log-in"></span>
                    Увійти
                </a>
            </li>
            <li>
                <a ng-if="vm.loggedIn" ng-href="#">
                    <span class="glyphicon glyphicon-user"></span>
                    {{ user.username }}
                </a>
            </li>
            <li>
                <a ng-if="vm.loggedIn" ng-href="#/classifieds/login" ng-click="vm.doLogout()">
                    <span class="glyphicon glyphicon-log-out"></span>
                    Вийти
                </a>
                <!--<span ng-show="currentUser">Hi {{ currentUser.firstname }}</span>-->
            </li>
        </ul>

    </div>
</nav>
<div class="filters well form-inline clearfix" ng-show="showFilters">

    <div class="form-group">
        <label for="search"></label>
        <input type="text" class="form-control" id="search" ng-model="classifiedsFilter" autofocus placeholder="Введіть ключове слово"/>
    </div>

    <div class="form-group">
        <label for="category">Категорія</label>
        <select name="category" class="form-control" id="category" ng-model="category">
            <option ng-repeat="category in categories" value="{{ category }}">
                {{ category }}
            </option>
        </select>
    </div>

    <div class="form-group">
        <button class="btn btn-warning" ng-click="classifiedsFilter = ''; category = ''">Очистити</button>
    </div>

</div> <!--filters-->

<ui-view></ui-view>

<div class="container">
    <div id="infinite-scroll-hack"></div>
    <div ng-controller='PaginationCtrl as data'>
        <div infinite-scroll='classifiedsDBService.nextPage()' infinite-scroll-disabled='classifiedsDB.busy'
             infinite-scroll-distance='0'>
            <!--<div ng-repeat="classified in classifieds">-->
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Назва</th>
                            <th>Ціна</th>
                            <th>Категорія</th>
                            <th>Зображення</th>
                            <th>Опис</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="classified in classifieds |
                                  filter: classifiedsFilter |
                                  filter: category |
                                  filter: user.id">
                        <td>{{classified.title}}</td>
                        <td>{{classified.price}}</td>
                        <!--<td>{{classified.category}}</td>-->
                        <td><p ng-repeat="category in classified.category">{{category}}</p></td>
                        <td><img ng-src="{{classified.image}}" alt="" width="100"></td>
                        <td>{{classified.content}}</td>
                        <td>

                            <!--Контактні дані-->
                            <div class="dropdown">
                                <button class="btn btn-default btn-xs dropdown-toggle btn-block" type="button" id="dropdownMenuContactData"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    Контактні дані
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuContactData">
                                    <li><span class="glyphicon glyphicon-user"> {{ classified.contact.name }}</span></li>
                                    <li><span class="glyphicon glyphicon-phone"> {{ classified.contact.phone }}</span></li>
                                    <li><span class="glyphicon glyphicon-envelope"> {{ classified.contact.email }}</span></li>
                                </ul>
                            </div>

                            <!--Адмін-->
                            <div class="dropdown" ng-show="vm.loggedIn">
                                <button class="btn btn-default btn-xs dropdown-toggle btn-block" type="button" id="dropdownMenuAdmin"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    Адмін
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuAdmin">
                                    <li>
                                        <a ng-href="javascript:;" ng-click="data.editClassified(classified)">
                                            Редагувати
                                        </a>
                                        <a ng-href="javascript:;" ng-click="data.removeClassified(classified)">
                                            Видалити
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    <tr ng-show="classifiedsDBService.busy">
                        <td colspan="5" class="text-center">
                            <i class="fa fa-spinner fa-spin"></i>
                        </td>
                    </tr>
                    </tbody>
                </table>
            <!--</div>-->
        </div>
    </div>
</div>