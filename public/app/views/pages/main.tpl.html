<nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse"
                data-target="#nav-toggle">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Оголошення</a>
    </div>

    <div class="collapse navbar-collapse" id="nav-toggle">
        <ul class="nav navbar-nav">
            <li ng-if="!vm.loggedIn">
                <a ng-href="#/classifieds" ng-click="vm.openSidebar()">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Новий Товар
                </a>
            </li>
            <li ng-if="vm.loggedIn">
                <a ng-href="#/classifieds/new" ng-click="vm.openSidebar()">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Новий Товар
                </a>
            </li>
            <li>
                <a ng-href="#" ng-click="showFilters = !showFilters">
                    <span class="glyphicon glyphicon-search"></span>
                    Фільтр
                </a>
            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a ng-if="!vm.loggedIn" ng-href="#/classifieds/register">
                    <span class="glyphicon glyphicon-pencil"></span>
                    Реєстрація
                </a>
            </li>
            <li>
                <a ng-if="!vm.loggedIn" ng-href="#/classifieds/login">
                    <span class="glyphicon glyphicon-log-in"></span>
                    Увійти
                </a>
            </li>
            <li>
                <a ng-if="vm.loggedIn" ng-href="#">
                    <span class="glyphicon glyphicon-user"></span>
                    {{ user.username }}
                </a>
            </li>
            <li>
                <a ng-if="vm.loggedIn" ng-href="#/classifieds/login" ng-click="vm.doLogout()">
                    <span class="glyphicon glyphicon-log-out"></span>
                    Вийти
                </a>
                <!--<span ng-show="currentUser">Hi {{ currentUser.firstname }}</span>-->
            </li>
        </ul>

    </div>
</nav>
<div class="filters well form-inline clearfix" ng-show="showFilters">

    <div class="form-group">
        <label for="search"></label>
        <input type="text" class="form-control" id="search" ng-model="classifiedsFilter" autofocus placeholder="Введіть ключове слово"/>
    </div>

    <div class="form-group">
        <label for="category">Категорія</label>
        <select name="category" class="form-control" id="category" ng-model="category">
            <option ng-repeat="category in categories" value="{{ category }}">
                {{ category }}
            </option>
        </select>
    </div>

    <div class="form-group">
        <button class="btn btn-warning" ng-click="classifiedsFilter = ''; category = ''">Очистити</button>
    </div>

</div> <!--filters-->

<ui-view></ui-view>


<div class="container">

    <!--<div ng-hide="vm.loggedIn">
        <h2>
            <span class="label label-success">
                <a href="#/classifieds/login">Ввійдіть</a> щоб переглянути оголошення
            </span>
        </h2>
    </div>-->

    <!--<classified-card classifieds="classifieds"
                     classifieds-filter="classifiedsFilter"
                     category="category"
                     user-id-filter="user.id">
    </classified-card>-->

    <div class="bs-component" ng-controller="listdata as data">
        <dir-pagination-controls
                max-size="8"
                direction-links="true"
                boundary-links="true"
                on-page-change="vm.getData(newPageNumber)" >
        </dir-pagination-controls>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Назва</th>
                <th>Ціна</th>
                <th>Категорія</th>
                <th>Зображення</th>
                <th>Опис</th>
            </tr>
            </thead>
            <tbody>
                <tr ng-show="classifieds.length <= 0">
                    <td colspan="5" style="text-align:center;">
                        Loading new data!!
                    </td>
                </tr>
                <tr dir-paginate="classified in classifieds |
                                  itemsPerPage:data.itemsPerPage |
                                  filter: classifiedsFilter |
                                  filter: category |
                                  filter: user.id"
                    total-items="data.total_count">
                    <td>{{classified.title}}</td>
                    <td>{{classified.price}}</td>
                    <td>{{classified.category}}</td>
                    <td><img ng-src="{{classified.image}}" alt="" width="100"></td>
                    <td>{{classified.content}}</td>
                </tr>
            </tbody>
        </table>
        <dir-pagination-controls
                max-size="8"
                direction-links="true"
                boundary-links="true"
                on-page-change="data.getData(newPageNumber)" >
        </dir-pagination-controls>
    </div>
</div>