<nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse"
                data-target="#nav-toggle">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Оголошення</a>
    </div>

    <div class="collapse navbar-collapse" id="nav-toggle">
        <ul class="nav navbar-nav">
            <li ng-if="!vm.loggedIn">
                <a ng-href="#/classifieds" ng-click="vm.openSidebar()">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Новий Товар
                </a>
            </li>
            <li ng-if="vm.loggedIn">
                <a ng-href="#/classifieds/new" ng-click="vm.openSidebar()">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Новий Товар
                </a>
            </li>
            <li>
                <a ng-href="#" ng-click="showFilters = !showFilters">
                    <span class="glyphicon glyphicon-search"></span>
                    Фільтр
                </a>
            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a ng-if="!vm.loggedIn" ng-href="#/classifieds/register">
                    <span class="glyphicon glyphicon-pencil"></span>
                    Реєстрація
                </a>
            </li>
            <li>
                <a ng-if="!vm.loggedIn" ng-href="#/classifieds/login">
                    <span class="glyphicon glyphicon-log-in"></span>
                    Увійти
                </a>
            </li>
            <li>
                <a ng-if="vm.loggedIn" ng-href="#">
                    <span class="glyphicon glyphicon-user"></span>
                    {{ user.username }}
                </a>
            </li>
            <li>
                <a ng-if="vm.loggedIn" ng-href="#/classifieds/login" ng-click="vm.doLogout()">
                    <span class="glyphicon glyphicon-log-out"></span>
                    Вийти
                </a>
                <!--<span ng-show="currentUser">Hi {{ currentUser.firstname }}</span>-->
            </li>
        </ul>

    </div>
</nav>
<div class="filters well form-inline clearfix" ng-show="showFilters">

    <div class="form-group">
        <label for="search"></label>
        <input type="text" class="form-control" id="search" ng-model="classifiedsFilter" autofocus placeholder="Введіть ключове слово"/>
    </div>

    <div class="form-group">
        <label for="category">Категорія</label>
        <select name="category" class="form-control" id="category" ng-model="category">
            <option ng-repeat="category in vm.categories" value="{{ category }}">
                {{ category }}
            </option>
        </select>
    </div>

    <div class="form-group">
        <button class="btn btn-warning" ng-click="classifiedsFilter = ''; category = ''">Очистити</button>
    </div>

</div> <!--filters-->

<ui-view></ui-view>


<div class="container">

    <!--<div ng-controller="FileUploadController">
        <input type="file" nv-file-select uploader="uploader"/><br/>
        <ul>
            <li ng-repeat="item in uploader.queue">
                Name: <span ng-bind="item.file.name"></span><br/>
                <button ng-click="item.upload()">upload</button>
            </li>
        </ul>
    </div>-->

    <!--<div ng-controller="FileUploadController">
        Upload image <input type="file" nv-file-select="onFileSelect($files)" accept="image/png, image/jpeg">
        <span data-ng-if="uploadInProgress">Upload progress: {{ uploadProgress }}</span>
        <img data-ng-src="uploadedImage" data-ng-if="uploadedImage">
    </div>-->

    <!--<div ng-controller="imageUploadController">
        <form name="myForm">
            <fieldset>
                <legend>Upload on form submit</legend>
                <br>Image:
                <input type="file" ngf-select ng-model="picFile" name="file"
                       accept="image/*" ngf-model-invalid="errorFile">
                <img ng-show="myForm.file.$valid" ngf-thumbnail="picFile" class="thumb">
                <button ng-click="picFile = null" ng-show="picFile">Remove</button>
                <br>
                <button ng-disabled="!myForm.$valid"
                        ng-click="uploadPic(picFile)">Submit</button>
                <span class="progress" ng-show="picFile.progress >= 0">
                    <div style="width:{{picFile.progress}}%"
                         ng-bind="picFile.progress + '%'"></div>
                </span>
                <span ng-show="picFile.result">Upload Successful</span>
                <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
            </fieldset>
            <br>
        </form>
    </div>-->

    <!--<div ng-hide="vm.loggedIn">
        <h2>
            <span class="label label-success">
                <a href="#/classifieds/login">Ввійдіть</a> щоб переглянути оголошення
            </span>
        </h2>
    </div>-->

    <!-- TODO: Note: In real production apps that deal with thousands of records, programmers usually use pagination by fetching
    only a certain number of items at once (5, 10, 100, and so on). To do this, use the limit and skip options with the find
    method (e.g., HackHall example: https://github.com/azat-co/hackhall/blob/master/routes/posts.js#L37).
    Practical Node.js - page 120. -->

    <classified-card classifieds="classifieds"
                     classifieds-filter="classifiedsFilter"
                     category="category"
                     user-id-filter="user.id">
    </classified-card>
</div>